<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Setting up a provider </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Setting up a provider ">
    <meta name="generator" content="docfx 2.40.10.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p>Once the <a href="index.html">core concepts</a> are clear, using the library in your project should be quite easy.</p>
<p>Performing route planning queries (at the bare minimum) consists of the following parts:</p>
<ol>
<li>Setting up a provider</li>
<li>Setting up a profile</li>
<li>Asking a query</li>
</ol>
<h2 id="setting-up-a-provider">Setting up a provider</h2>
<p>As noted, the library needs a server which offers all the information as <a href="linkedconnections.org">Linked Connections</a>.
A linked Connections dataset has two entry points:</p>
<ul>
<li>A web resource which contains all stops</li>
<li>Multiple web resources which contain the connections in a timewindow (with a link to a next and previous timetable)</li>
</ul>
<p>Search for these links (or ask for them) on your public transport provider website.</p>
<p>Once you have obtained these links, make a new dataset with:</p>
<pre><code>    using Itinero.Transit.IO.LC;
    
    ...
    
    Uri locations = &lt;...&gt;
    Uri connections = &lt;...&gt;
    var dataset = new LinkedConnectionDataset(locations, connections);
    var transitDB = dataset.AsTransitDb();
</code></pre>
<p>If needed, data can already be downloaded now for a certain time period. For example, if the code should run on a server, it can be useful to prefetch the data for the coming days. If it is not certain when the traveller will travel (if he'll travel at all), the next line should be skipped:</p>
<pre><code>    transitDB.UpdateTimeFrame(startDate, endDate)        
</code></pre>
<p>If you'd like to force an update on the data already in the transit db, use the refresh flag:</p>
<pre><code>    transitDB.UpdateTimeFrame(startDate, endDate, refresh:true)        
</code></pre>
<p>Note that <em>needed data will be downloaded automatically upon request</em>. In other words, if a traveller want to travel at a time span that is not yet loaded, it'll be loaded dynamically.</p>
<h2 id="setting-up-a-profile">Setting up a profile</h2>
<p>The <em>profile</em> contains personal preferences of the traveller, such as:</p>
<ul>
<li>Which public transport providers are available</li>
<li>The walking time between stops</li>
<li>How much time is needed to get from one vehicle to another</li>
<li>Which metrics are used to compare journeys</li>
</ul>
<p>A profile is constructed with:</p>
<pre><code>    var p = new Profile
            &lt;TransferStats&gt;
                (
                State.TransitDb,
                new InternalTransferGenerator(internalTransferTime),
                null,
                TransferStats.Factory,
                TransferStats.ProfileTransferCompare);
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/openplannerteam/itinero-transit/blob/features/docfx/articles/UsingTheLibrary.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
